# IFU 子模块 PredChecker

## 功能描述

### 功能概述
预译码模块负责检查一些容易被发现的预测错误，以便及时纠正。从性能的角度讲，越早发现预测错误，就能尽早将指令流纠正回正确执行路径上。IFU阶段实际上可以获取到指令的全部信息，无能为力的是获取正确的寄存器信息。

### 预测可检查内容
- 预测方向上：我们可以知道jal/jalr指令一定跳转，我们也知道普通指令一定不跳转（异常）。遇到这种情况，我们可以裁剪预测块的大小，让处理器不要在错误路劲上狂奔突进。
- 目的地址：我们知道普通指令一定是顺序执行的，我们还能计算出jal指令和br指令的目的地址。特殊的我们大概率知道jalr类型中函数返回指令的目的指令。
- 从上述角度考虑，IFU有一定的辅助预测作用

### 实现权衡
对于预测块范围上的修正，我们是能修就修正。对于目的地址，我们是不修正的，我们相信预测器。除非是我们发现了预测块范围上的错误，然后提供我们给的目的地址。为什么这么做，这是从实际效果和成本上考虑的折中。预测器将指令类型预测正确了，将指令位置预测正确，然后目的地址预测错误了 ---- 嗯~~，不能说没有。经研究讨论概率有些低。

### 整体框图
![predChecker结构](../figure/IFU/predChecker_structure.svg)